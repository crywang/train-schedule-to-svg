samecitytxt = u'''
南京,南京南,仙林
广州,广州南,广州东,广州北
长沙,长沙南,长沙西
石家庄,石家庄北,石家庄东,高邑,藁城南,藁城
杭州,杭州东
沈阳,沈阳北,沈阳南,裕国,沈阳西
北京,北京西,北京南,北京北,北京东,清河,北京朝阳,昌平北
郑州,郑州东,郑州西,南阳寨
苏州,苏州北,苏州园区,苏州新区
成都,成都东,犀浦,成都西,成都南
武昌,汉口,武汉
厦门,厦门北,厦 门
昆明,昆明南,王家营西
兰州,兰州西,兰州新区,西固,永登,皋兰,榆中,河口南,兰州东,夏官营
东莞,常平,东莞东,常平东,常平南,樟木头东,银瓶
长春,长春西
南宁,南宁东,南宁西
淄博,淄博北
西安,西安北,西安南
天津,天津西,天津北,塘沽,天津南,滨海西,滨海,杨柳青,军粮城北,蓟州
南昌,南昌西,南 昌
深圳,深圳北,福田,深圳东,深圳西
重庆,重庆北,重庆西,重庆南,沙坪坝
海口,海口东,海  口东
哈尔滨,哈尔滨东,哈尔滨北,哈尔滨西,香坊
乌鲁木齐,乌鲁木齐南
芜湖,弋江
福州,福州南,福州 南
佛山,佛山西,狮山,狮山北
太原,太原南,太原东,汾河
青岛,青岛北,青岛西
中山,小榄,中山北,古镇,南头,南朗,东升
济南,济南西,济南东,大明湖,章丘,章丘北
包头,包头东,昆都仑召,包头西,包头北
贵阳,贵阳北,贵阳东
上海,上海南,上海虹桥,上海西
合肥,合肥南,合肥北城
齐齐哈尔,齐齐哈尔南
扬州,江都
佳木斯,佳木斯西
娄底,娄底南
茂名,茂名西,电白,马踏
集宁南,乌兰察布
肇庆,肇庆东,鼎湖东,大旺,端州,鼎湖山,四会
梅州,梅州西
潮汕,饶平
惠州,惠州南,小金口,云山,仲恺,惠环,沥林北,西湖东,龙丰,惠东
唐山,唐山北,唐山南,古冶,曹妃甸东,唐海南,南堡北
宝鸡,宝鸡南
株洲,株洲南,株洲西
洛阳,洛阳龙门,洛阳东,关林
呼和浩特,呼和浩特东
衡阳,衡阳东
渭南,渭南北
襄阳,襄阳东
曲靖,曲靖北
徐州,徐州东
运城,运城北
达州,石梯
铜陵,铜陵北
衡水,衡水北
南充,南充北
梁平,梁平南
烟台,烟台南,烟台西
黄山,黄山北
内江,内江北
天水,天水南,新阳镇,渭南镇
承德,上板城,承德南,承德县北,平泉北,平泉,承德东,上板城南
阜新,阜新南
眉山,眉山东
新乡,新乡东
三亚,三  亚
西昌,西昌南
安顺,安顺西
武威,武威南
锦州,锦州南
大连,大连北
珠海,明珠,唐家湾,珠海北,前山
银川,灵武,宁东
临汾,临汾西
商丘,商丘南
邯郸,邯郸东
长寿,长寿北,长寿湖
怀化,怀化南
大庆,大庆西,大庆东
营口,营口东
白银西,白银市
昆山,昆山南,阳澄湖
鹰潭,鹰潭北
开封,宋城路,开封北
凯里,凯里南
侯马,侯马西
黄冈,黄冈东,黄冈西
三明,三明北
咸阳,咸阳秦都
嘉峪关,嘉峪关南
德惠,德惠西
赤峰南,平庄,赤峰东
原平,原平西
玉门,低窝铺
湘潭,湘潭北
黄石,黄石北,大冶北,花湖
沧州,沧州西
安阳,安阳东
延平西,延平东,延平
遵义,遵义西
石嘴山,大武口
保定,保定东
宁波,庄桥
孝感,孝感东,孝感北
铜仁南,玉屏
万州,万州北
介休,介休东
榆次,晋中
永川,永川东
韶关,韶关东
郴州,郴州西
岳阳,岳阳东
四平,四平东
泰山,泰安
漯河,漯河西
陆丰,汕尾,鲘门
铁岭,铁岭西
枣庄,枣庄西,枣庄东
吐鲁番,吐鲁番北
丹东,五龙背,五龙背东
福鼎,太姥山
涪陵,涪陵北
阳平关,宁强南,燕子砭
临沂,临沂东
海林,海林北
资阳,资阳北
瓜州,疏勒河
隆昌,隆昌北
平凉,平凉南
蚌埠,蚌埠南
桂林,桂林北,桂林西
德州,德州东
信阳,信阳东
建阳,南平市,武夷山,武夷山北
麻城,麻城北
梧州,梧州南
华山,华山北
许昌,许昌东
马鞍山,马鞍山东
天门,天门南
公主岭,公主岭南
江油,江油北
胶州,胶州北
延吉,延吉西
都匀,都匀东
廊坊,廊坊北
柳园,柳园南
东胜西,鄂尔多斯,东胜东
阿城,阿城北
盐城,盐城北
怀仁,怀仁东
昭通,昭通南,昭通北
无锡,无锡东,无锡新区,惠山
常州,常州北,戚墅堰
金华,金华南
镇江,镇江南
莆田,仙游,涵江
潍坊,潍坊北
嘉兴,嘉兴南
温州,温州南
萍乡,萍乡北
驻马店,驻马店西
邢台,邢台东
丹阳,丹阳北
绍兴,绍兴北
宿州,宿州东
葫芦岛,葫芦岛北
余姚,余姚北
威海,威海北,文登东,文登
新余,新余北
咸宁,咸宁北,咸宁南,咸宁东
滁州,滁州北
三门峡,三门峡南,三门峡西
杨陵,杨陵南
鞍山,鞍山西
来宾,来宾北
民权,民权北
琼海,博鳌
长兴,长兴南
鹤壁,鹤壁东
霸州,霸州西,胜芳
海宁,海宁西
鄂州,鄂州东
三水,三水南,三水北,云东海
永康,永康南
普宁,葵潭
曲阜,曲阜东
德清,德清西
乐东,黄流,尖峰
宾阳,黎塘
兰考,兰考南
顺德,容桂,顺德学院,北滘,碧江
缙云,缙云西
滕州,滕州东
定州,定州东
张掖,张掖西
青州市,青州市北
邵阳,邵阳北
高密,高密北
巢湖,巢湖东
绥中,绥中北
泰州,姜堰
定西,定西北
湛江,湛江西
武义,武义北
昌图,昌图西
岐山,蔡家坡
辛集,辛集南
海城,海城西
通远堡,凤城东,通远堡西,凤凰城
白马井,银滩
鄯善,鄯善北,吐哈
绍兴东,上虞
台山,恩平,开平南,双水镇
扶余,扶余北
阳泉,阳泉北
开原,开原西
连云港,连云港东
景德镇,景德镇北
绩溪北,绩溪县
嘉善,嘉善南
桃村,桃村北
宝丰,平顶山,平顶山西
赤壁,赤壁北
高碑店,高碑店东
醴陵,醴陵东
平原,平原东
海阳北,徐家店
巩义,巩义南
禹城,禹城东
石林,石林西,石林南
新化,新化南
灵宝,灵宝西
玉山,玉山南
平遥,平遥古城
淮北,淮北北
蛟河,蛟河西
广安,广安南
酒泉,酒泉南
朝阳,朝阳南
东乡,抚州东
建瓯,建瓯西
瑞昌,瑞昌西
渑池,渑池南
涿州,涿州东
日照,日照西
进贤,进贤南
樟树,樟树东
霍州,霍州东
鹿寨,鹿寨北
乌海,乌海西,乌海北
老城镇,福山镇
盖州,盖州西
尚志,尚志南
溆浦,溆浦南
洪洞,洪洞西
贵定,贵定北,贵定县
丰城,丰城南
汨罗,汨罗东
安图,安图西
古田,古田北
灵石,灵石东
太谷,太谷西
旬阳,旬阳北
三江南,三江县
耒阳,耒阳西
峨眉,峨眉山,燕岗
闻喜,闻喜西
忻州,忻州西
清远,源潭
衡山,衡山西
长治,长治北
永济,永济北
祁县,祁县东
北票,北票南
襄汾,襄汾西
歙县,歙县北
凌源,牛河梁,凌源东
蒲城,蒲城东
资中,资中北
英德,英德西
枫林,白沙铺
富源,富源北
荣昌,荣昌北
桐梓,桐梓东
图们,图们北
大安,大安北
彭山,彭山北
苇河,苇河西
义县,义县西
井冈山,龙市
新晃,新晃西
亚布力,亚布力西,亚布力南
横道河子,横道河子东
晋城,晋城北
一面坡,一面坡北
高台,高台南
白河县,白河东
蒙自,蒙自北
简阳,简阳南
卓资东,卓资山
清水,清水北
岱岳,山阴
莱西,莱西北
帽儿山,帽儿山西
大足,大足南
德兴,德兴东
景州,龙华
乐昌,乐昌东
临泽,临泽南
南芬,南芬北
黄陵,黄陵南
普雄,越西
谭家井,古浪
宜宾,宜宾南,宜宾西
大石头,大石头南
华容东,华容南
阳曲,阳曲西
东营,东营南
博乐,阿拉山口
如东,栟茶
太阳山,红寺堡
盐津,盐津北
赣州,赣州西,赣县北
吉安,吉安西
张家界,张家界西
大同,大同南
张家口,张家口南
攀枝花,攀枝花南
元谋,元谋西
'''

rows = samecitytxt.split(u'\n')

def sortbynum(x,y):
    if x not in d and y not in d:
        return 0
    if x not in d:
        return 1
    if y not in d:
        return -1
    if d[x] < d[y]:
        return 1
    if d[x] > d[y]:
        return -1
    return 0

same_city = []
for row in rows:
    row = row.split(u',')
    row = sorted(row, sortbynum) #py2
    for i in range(len(row)):
        if sum([1 if row[i] in col else 0 for col in row]) >= 2:
            center = row.pop(i)
            row.insert(0, center)
            print(center)
            break
    same_city.append(row)

def sortbytotalnum(x,y):
    numx = sum([d[i]if i in d else 0 for i in x])
    numy = sum([d[i]if i in d else 0 for i in y])
    if numx < numy:
        return 1
    if numx > numy:
        return -1
    return 0

same_city = sorted(same_city, sortbytotalnum) #py2

for r in same_city:
    print(",".join(r))
